function UserInfo(){}UserInfo.prototype.addImageSelectEvent=function(){var a=$(".thumbnail"),e=$(".image-input");a.click(function(){e.click()}),e.change(function(){var s=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200===e.code){var n=e.data.token,t="lbt"+(new Date).getTime()+"."+s.name.split(".")[1],o={fname:t,params:{},mimeType:["image/png","image/jpeg","image/gif"]},i={useCdnDomain:!0,retryCount:6,region:qiniu.region.z0};qiniu.upload(s,t,n,o,i).subscribe({next:function(e){var n=e.total.percent.toFixed(0)+"%";window.messageBox.showInfo("正在上传云服务器："+n+"%")},error:function(e){window.messageBox.showError(e.message)},complete:function(e){var n="http://q2ek62mau.bkt.clouddn.com/"+e.key;a.attr("src",n),window.messageBox.showSuccess("上传云服务器成功！")}})}}})})},UserInfo.prototype.listenEditUserInfoEvent=function(){var e=$(".save-btn"),t=$(".thumbnail"),o=$("textarea[name='desc']");e.click(function(){var e=t.attr("src"),n=o.val();xfzajax.post({url:"/cms/edit_user/",data:{image_url:e,desc:n},success:function(e){200===e.code&&(window.messageBox.showSuccess("保存成功！"),window.location=window.location.href)}})})},UserInfo.prototype.run=function(){this.addImageSelectEvent(),this.listenEditUserInfoEvent()},$(function(){(new UserInfo).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJfaW5mby5qcyJdLCJuYW1lcyI6WyJVc2VySW5mbyIsInByb3RvdHlwZSIsImFkZEltYWdlU2VsZWN0RXZlbnQiLCJpbWFnZSIsIiQiLCJpbWFnZUlucHV0IiwiY2xpY2siLCJjaGFuZ2UiLCJmaWxlIiwidGhpcyIsImZpbGVzIiwieGZ6YWpheCIsImdldCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ0b2tlbiIsImtleSIsIkRhdGUiLCJnZXRUaW1lIiwibmFtZSIsInNwbGl0IiwicHV0RXh0cmEiLCJmbmFtZSIsInBhcmFtcyIsIm1pbWVUeXBlIiwiY29uZmlnIiwidXNlQ2RuRG9tYWluIiwicmV0cnlDb3VudCIsInJlZ2lvbiIsInFpbml1IiwiejAiLCJ1cGxvYWQiLCJzdWJzY3JpYmUiLCJuZXh0IiwicmVzcG9uc2UiLCJwZXJjZW50VGV4dCIsInRvdGFsIiwicGVyY2VudCIsInRvRml4ZWQiLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJlcnJvciIsInNob3dFcnJvciIsIm1lc3NhZ2UiLCJjb21wbGV0ZSIsImF0dHIiLCJzaG93U3VjY2VzcyIsImxpc3RlbkVkaXRVc2VySW5mb0V2ZW50Iiwic2F2ZUJ0biIsImltYWdlVGFnIiwiZGVzY1RhZyIsImltYWdlX3VybCIsImRlc2MiLCJ2YWwiLCJwb3N0IiwiZGF0YSIsImxvY2F0aW9uIiwiaHJlZiIsInJ1biJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsWUFJVEEsU0FBU0MsVUFBVUMsb0JBQXNCLFdBQ3JDLElBQUlDLEVBQVFDLEVBQUUsY0FDVkMsRUFBYUQsRUFBRSxnQkFHbkJELEVBQU1HLE1BQU0sV0FFUkQsRUFBV0MsVUFzQmZELEVBQVdFLE9BQU8sV0FDZCxJQUFJQyxFQUFPQyxLQUFLQyxNQUFNLEdBQ3RCQyxRQUFRQyxJQUFJLENBRVJDLElBQU8sZ0JBQ1BDLFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QixJQUFJQyxFQUFRRCxFQUFhLEtBQVMsTUFDOUJFLEVBQU0sT0FBUSxJQUFLQyxNQUFRQyxVQUFZLElBQU1YLEVBQUtZLEtBQUtDLE1BQU0sS0FBSyxHQUNsRUMsRUFBVyxDQUNYQyxNQUFPTixFQUNQTyxPQUFRLEdBQ1JDLFNBQVUsQ0FBQyxZQUFhLGFBQWMsY0FFdENDLEVBQVMsQ0FDVEMsY0FBYyxFQUNkQyxXQUFZLEVBQ1pDLE9BQVFDLE1BQU1ELE9BQU9FLElBRVJELE1BQU1FLE9BQU94QixFQUFNUyxFQUFLRCxFQUFPTSxFQUFVSSxHQUUvQ08sVUFBVSxDQUVqQkMsS0FBUSxTQUFVQyxHQUNkLElBR0lDLEVBSFFELEVBQVNFLE1BQ0RDLFFBRU1DLFFBQVEsR0FBSyxJQUN2Q0MsT0FBT0MsV0FBV0MsU0FBUyxZQUFjTixFQUFjLE1BRzNETyxNQUFTLFNBQVVSLEdBQ2ZLLE9BQU9DLFdBQVdHLFVBQVVULEVBQVNVLFVBR3pDQyxTQUFZLFNBQVVYLEdBQ2xCLElBRUl0QixFQUZTLG9DQUNFc0IsRUFBU2xCLElBRXhCZCxFQUFNNEMsS0FBSyxNQUFPbEMsR0FDbEIyQixPQUFPQyxXQUFXTyxZQUFZLHVCQVMxRGhELFNBQVNDLFVBQVVnRCx3QkFBMEIsV0FDekMsSUFBSUMsRUFBVTlDLEVBQUUsYUFDWitDLEVBQVcvQyxFQUFFLGNBQ2JnRCxFQUFVaEQsRUFBRSx5QkFHaEI4QyxFQUFRNUMsTUFBTSxXQUNWLElBQUkrQyxFQUFZRixFQUFTSixLQUFLLE9BQzFCTyxFQUFPRixFQUFRRyxNQUNuQjVDLFFBQVE2QyxLQUFLLENBQ1QzQyxJQU5FLGtCQU9GNEMsS0FBTyxDQUNISixVQUFhQSxFQUNiQyxLQUFRQSxHQUVaeEMsUUFBVyxTQUFVQyxHQUNLLE1BQW5CQSxFQUFhLE9BQ1p5QixPQUFPQyxXQUFXTyxZQUFZLFNBQzlCUixPQUFPa0IsU0FBV2xCLE9BQU9rQixTQUFTQyxZQU90RDNELFNBQVNDLFVBQVUyRCxJQUFNLFdBQ3JCbkQsS0FBS1Asc0JBQ0xPLEtBQUt3QywyQkFHVDdDLEVBQUUsWUFDaUIsSUFBSUosVUFDVjREIiwiZmlsZSI6InVzZXJfaW5mby5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBVc2VySW5mbygpIHtcclxuXHJcbn1cclxuXHJcblVzZXJJbmZvLnByb3RvdHlwZS5hZGRJbWFnZVNlbGVjdEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBpbWFnZSA9ICQoJy50aHVtYm5haWwnKTtcclxuICAgIHZhciBpbWFnZUlucHV0ID0gJCgnLmltYWdlLWlucHV0Jyk7XHJcbiAgICAvLyDlm77niYfmmK/kuI3og73lpJ/miZPlvIDmlofku7bpgInmi6nmoYbnmoTvvIzlj6rog73pgJrov4dpbnB1dFt0eXBlPSdmaWxlXeagh+etvuaJk+W8gFxyXG4gICAgLy8g5omA5Lul5Y+v5Lul5Zyo54K55Ye75Zu+54mH55qE5pe25YCZ6I635Y+W5Yiw6L+Z5LiqaW5wdXTmoIfnrb7vvIzmiYvliqjorr7nva7lsIblhbbmiZPlvIBcclxuICAgIGltYWdlLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDmiYvliqjmiafooYzmiZPlvIDmlofku7bov5nkuKppbnB1dOeahOeCueWHu+S6i+S7tlxyXG4gICAgICAgIGltYWdlSW5wdXQuY2xpY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAvLyAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAvLyAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcclxuICAgIC8vICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgLy8gICAgICAgICAvLyDkuIrkvKDoh7PmnKzlnLBcclxuICAgIC8vICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9maWxlLycsXHJcbiAgICAvLyAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXHJcbiAgICAvLyAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLFxyXG4gICAgLy8gICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcclxuICAgIC8vICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAvLyAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgIC8vICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIGltYWdlLmF0dHIoJ3NyYycsIHVybCk7XHJcbiAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vIH0pO1xyXG5cclxuICAgIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAvLyDkuIrkvKDoh7PkuIPniZvkupFcclxuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3FudG9rZW4vJyxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3VsdFsnZGF0YSddWyd0b2tlbiddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAnbGJ0JyArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgKyAnLicgKyBmaWxlLm5hbWUuc3BsaXQoJy4nKVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuYW1lOiBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBbJ2ltYWdlL3BuZycsICdpbWFnZS9qcGVnJywgJ2ltYWdlL2dpZiddXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VDZG5Eb21haW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcWluaXUucmVnaW9uLnowXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBrZXksIHRva2VuLCBwdXRFeHRyYSwgY29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlvIDlp4vkuIrkvKBcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmliZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOaXtuiwg+eUqOeahOWHveaVsO+8jOaMgee7reWRiuivieS9oOiwg+eUqOS6huWkmuWwkVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dCc6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGVyY2VudCA9IHRvdGFsLnBlcmNlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b0ZpeGVk5L+d55WZeOS9jeWwj+aVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRUZXh0ID0gcGVyY2VudC50b0ZpeGVkKDApICsgJyUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0luZm8oJ+ato+WcqOS4iuS8oOS6keacjeWKoeWZqO+8micgKyBwZXJjZW50VGV4dCArICclJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOWksei0peiwg+eUqOeahOWHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZXJyb3InOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dFcnJvcihyZXNwb25zZS5tZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDkuIrkvKDlrozmiJDosIPnlKjnmoTlh73mlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbXBsZXRlJzogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9tYWluID0gJ2h0dHA6Ly9xMmVrNjJtYXUuYmt0LmNsb3VkZG4uY29tLyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZW5hbWUgPSByZXNwb25zZS5rZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gZG9tYWluICsgZmlsZW5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKCdzcmMnLCB1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+S4iuS8oOS6keacjeWKoeWZqOaIkOWKn++8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5Vc2VySW5mby5wcm90b3R5cGUubGlzdGVuRWRpdFVzZXJJbmZvRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2F2ZUJ0biA9ICQoJy5zYXZlLWJ0bicpO1xyXG4gICAgdmFyIGltYWdlVGFnID0gJChcIi50aHVtYm5haWxcIik7XHJcbiAgICB2YXIgZGVzY1RhZyA9ICQoXCJ0ZXh0YXJlYVtuYW1lPSdkZXNjJ11cIik7XHJcbiAgICB2YXIgdXJsID0gJy9jbXMvZWRpdF91c2VyLyc7XHJcblxyXG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltYWdlX3VybCA9IGltYWdlVGFnLmF0dHIoJ3NyYycpO1xyXG4gICAgICAgIHZhciBkZXNjID0gZGVzY1RhZy52YWwoKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ2ltYWdlX3VybCc6IGltYWdlX3VybCxcclxuICAgICAgICAgICAgICAgICdkZXNjJzogZGVzYyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn5L+d5a2Y5oiQ5Yqf77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuVXNlckluZm8ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuYWRkSW1hZ2VTZWxlY3RFdmVudCgpO1xyXG4gICAgdGhpcy5saXN0ZW5FZGl0VXNlckluZm9FdmVudCgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdXNlcmluZm8gPSBuZXcgVXNlckluZm8oKTtcclxuICAgIHVzZXJpbmZvLnJ1bigpO1xyXG59KTtcclxuIl19
